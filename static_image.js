/**
 * @license
 * Copyright 2020 Google Inc. All Rights Reserved.
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * https://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 * =============================================================================
 */

import * as posenet_module from '@tensorflow-models/posenet';
import * as facemesh_module from '@tensorflow-models/facemesh';
import * as tf from '@tensorflow/tfjs';
import * as paper from 'paper';
import "babel-polyfill";

import dat from 'dat.gui';
import {SVGUtils} from './utils/svgUtils'
import {PoseIllustration} from './illustrationGen/illustration';
import {Skeleton, facePartName2Index} from './illustrationGen/skeleton';
import {toggleLoadingUI, setStatusText} from './utils/demoUtils';

import * as boySVG from './resources/illustration/boy.svg';
import * as girlSVG from './resources/illustration/girl.svg';
import * as abstractSVG from './resources/illustration/abstract.svg';
import * as blathersSVG from './resources/illustration/blathers.svg';
import * as tomNookSVG from './resources/illustration/tom-nook.svg';
import * as bopbotSVG from './resources/illustration/botbot_final.svg';
import * as boy_doughnut from './resources/images/boy_doughnut.jpg';
import * as tie_with_beer from './resources/images/tie_with_beer.jpg';
import * as test_img from './resources/images/test.png';
import * as full_body from './resources/images/full-body.png';
import * as full_body_1 from './resources/images/full-body_1.png';
import * as full_body_2 from './resources/images/full-body_2.png';
import * as blank from './resources/images/blank.jpg';

// clang-format off
import {
  drawKeypoints,
  drawPoint,
  drawSkeleton,
  renderImageToCanvas,
} from './utils/demoUtils';
import { FileUtils } from './utils/fileUtils';

// clang-format on
const resnetArchitectureName = 'MobileNetV1';
const avatarSvgs = {
  'girl': girlSVG.default,
  'boy': boySVG.default,
  'abstract': abstractSVG.default,
  'blathers': blathersSVG.default,
  'tom-nook': tomNookSVG.default,
  'bopbot': bopbotSVG.default,
};
const sourceImages = {
  'boy_doughnut': boy_doughnut.default,
  'tie_with_beer': tie_with_beer.default,
  'test_img': test_img.default,
  'full_body': full_body.default,
  'full_body_1': full_body_1.default,
  'full_body_2': full_body_2.default,
  'blank': blank.default,
};

let skeleton;
let illustration;
let canvasScope;

let posenet;
let facemesh;

const VIDEO_WIDTH = 500*2;
const VIDEO_HEIGHT = 256*2;

const CANVAS_WIDTH = 500*2;
const CANVAS_HEIGHT = 256*2;

const defaultQuantBytes = 2;
const defaultMultiplier = 1.0;
const defaultStride = 16;
const defaultInputResolution = 257;
const defaultMaxDetections = 1;
const defaultMinPartConfidence = 0.1;
const defaultMinPoseConfidence = 0.2;
const defaultNmsRadius = 20.0;

let predictedPoses;
let faceDetection;
let sourceImage;

/**
 * Draws a pose if it passes a minimum confidence onto a canvas.
 * Only the pose's keypoints that pass a minPartConfidence are drawn.
 */
function drawResults(image, canvas, faceDetection, poses) {
  renderImageToCanvas(image, [VIDEO_WIDTH, VIDEO_HEIGHT], canvas);
  const ctx = canvas.getContext('2d');
  poses.forEach((pose) => {
    if (pose.score >= defaultMinPoseConfidence) {
      if (guiState.showKeypoints) {
        drawKeypoints(pose.keypoints, defaultMinPartConfidence, ctx);
      }

      if (guiState.showSkeleton) {
        drawSkeleton(pose.keypoints, defaultMinPartConfidence, ctx);
      }
    }
  });
  if (guiState.showKeypoints) {
    faceDetection.forEach(face => {
      Object.values(facePartName2Index).forEach(index => {
          let p = face.scaledMesh[index];
          drawPoint(ctx, p[1], p[0], 3, 'red');
      });
    });
  }
}

async function loadImage(imagePath) {
  const image = new Image();
  const promise = new Promise((resolve, reject) => {
    image.crossOrigin = '';
    image.onload = () => {
      resolve(image);
    }
  });

  image.src = imagePath;
  return promise;
}

function multiPersonCanvas() {
  return document.querySelector('#multi canvas');
}

function getIllustrationCanvas() {
  return document.querySelector('.illustration-canvas');
}

/**
 * Draw the results from the multi-pose estimation on to a canvas
 */
function drawDetectionResults() {
  const canvas = multiPersonCanvas();
  drawResults(sourceImage, canvas, faceDetection, predictedPoses);
  if (!predictedPoses || !predictedPoses.length || !illustration) {
    return;
  }

  skeleton.reset();
  canvasScope.project.clear();

  if (faceDetection && faceDetection.length > 0) {
    let face = Skeleton.toFaceFrame(faceDetection[0]);
    illustration.updateSkeleton(predictedPoses[0], face);
  } else {
    illustration.updateSkeleton(predictedPoses[0], null);
  }
  illustration.draw(canvasScope, sourceImage.width, sourceImage.height);

  if (guiState.showCurves) {
    illustration.debugDraw(canvasScope);
  }
  if (guiState.showLabels) {
    illustration.debugDrawLabel(canvasScope);
  }
}

/**
 * Loads an image, feeds it into posenet the posenet model, and
 * calculates poses based on the model outputs
 */
async function testImageAndEstimatePoses() {
  toggleLoadingUI(true);
  setStatusText('Loading FaceMesh model...');
  document.getElementById('results').style.display = 'none';

  // Reload facemesh model to purge states from previous runs.
  facemesh = await facemesh_module.load();

  // Load an example image
  setStatusText('Loading image...');
  sourceImage = await loadImage(sourceImages[guiState.sourceImage]);

  // Estimates poses
  setStatusText('Predicting...');
  predictedPoses = await posenet.estimatePoses(sourceImage, {
    flipHorizontal: false,
    decodingMethod: 'multi-person',
    maxDetections: defaultMaxDetections,
    scoreThreshold: defaultMinPartConfidence,
    nmsRadius: defaultNmsRadius,
  });
  faceDetection = await facemesh.estimateFaces(sourceImage, false, false);
  console.log(faceDetection); 
  faceDetection =   [{'faceInViewConfidence': 1,
  'boundingBox': {'topLeft': [[154.726318359375, 6.968086242675781]],
   'bottomRight': [[356.2803649902344, 233.28753662109375]]},
  'mesh': [[100.2125015258789, 106.20552062988281, -17.962202072143555],
   [102.36540222167969, 87.85797119140625, -33.01103973388672],
   [101.4171371459961, 93.90804290771484, -18.80295753479004],
   [98.34370422363281, 68.13409423828125, -24.333669662475586],
   [102.93199157714844, 81.66575622558594, -34.75718688964844],
   [103.35639190673828, 73.80558013916016, -32.00141143798828],
   [104.05555725097656, 55.30904769897461, -14.364148139953613],
   [61.57783889770508, 52.72278594970703, 6.6556243896484375],
   [104.99481964111328, 39.98076248168945, -8.6515474319458],
   [105.60852813720703, 32.044227600097656, -8.918135643005371],
   [107.4201431274414, 9.095924377441406, -1.0126651525497437],
   [99.9681396484375, 109.01844024658203, -17.1035099029541],
   [99.63772583007812, 110.98221588134766, -15.4761323928833],
   [99.4327163696289, 111.33267211914062, -13.147005081176758],
   [99.30497741699219, 118.89981079101562, -11.324355125427246],
   [99.11929321289062, 121.19075012207031, -12.530474662780762],
   [98.88414001464844, 123.98590850830078, -14.290310859680176],
   [98.56586456298828, 127.14974212646484, -14.078422546386719],
   [97.9100341796875, 132.00177001953125, -10.279136657714844],
   [102.0145492553711, 91.11811065673828, -30.2066650390625],
   [95.58104705810547, 90.39657592773438, -22.504655838012695],
   [43.574974060058594, 33.026405334472656, 34.36530303955078],
   [78.18641662597656, 58.1432991027832, 1.2898379564285278],
   [72.40505981445312, 58.19955062866211, 1.452303171157837],
   [66.77056884765625, 57.759765625, 2.8066177368164062],
   [59.040313720703125, 54.60824203491211, 7.349088191986084],
   [83.08126831054688, 57.14871597290039, 2.3948090076446533],
   [71.42117309570312, 42.83327102661133, -0.28084683418273926],
   [77.61282348632812, 43.66387176513672, 0.3370141088962555],
   [65.36885070800781, 43.5631217956543, 1.221291422843933],
   [61.199432373046875, 45.69755172729492, 3.318373680114746],
   [54.304683685302734, 58.129234313964844, 9.931183815002441],
   [73.91558074951172, 137.35504150390625, -2.9363300800323486],
   [59.431888580322266, 51.441287994384766, 8.599652290344238],
   [38.14823913574219, 56.407432556152344, 34.8884391784668],
   [48.47132110595703, 54.32414627075195, 15.784820556640625],
   [70.00459289550781, 80.57476043701172, -6.502586364746094],
   [90.74226379394531, 104.618896484375, -17.61862564086914],
   [90.8714599609375, 110.21359252929688, -14.761523246765137],
   [80.6966552734375, 105.21177673339844, -13.968961715698242],
   [74.29188537597656, 106.2705307006836, -8.376557350158691],
   [83.50336456298828, 109.65684509277344, -11.876150131225586],
   [77.92374420166016, 109.36392974853516, -6.821621417999268],
   [66.5343246459961, 115.50457000732422, 1.3646939992904663],
   [97.15794372558594, 87.43247985839844, -32.72358703613281],
   [96.93355560302734, 81.37285614013672, -34.30792236328125],
   [53.562164306640625, 38.70210266113281, 5.243154048919678],
   [84.34730529785156, 67.58096313476562, -5.391360282897949],
   [81.13219451904297, 84.62897491455078, -19.043554306030273],
   [80.86631774902344, 81.48477935791016, -17.121503829956055],
   [52.43769073486328, 78.31822967529297, 0.7449142336845398],
   [97.67442321777344, 74.13355255126953, -30.52549171447754],
   [67.4785385131836, 31.89366340637207, -3.169182538986206],
   [59.485443115234375, 34.10457229614258, 0.7105515003204346],
   [50.04475784301758, 22.871871948242188, 24.31058120727539],
   [92.27368927001953, 37.53605270385742, -7.454439163208008],
   [82.7613296508789, 46.08625793457031, 2.147148847579956],
   [61.98030090332031, 108.3460922241211, 2.346583843231201],
   [38.74067687988281, 109.9340591430664, 46.41720962524414],
   [85.23956298828125, 88.20608520507812, -16.776275634765625],
   [90.38727569580078, 90.52186584472656, -17.099227905273438],
   [66.4385757446289, 108.8396224975586, 2.8073291778564453],
   [69.39822387695312, 109.23565673828125, 1.5499314069747925],
   [56.74169921875, 30.486167907714844, 3.45438551902771],
   [80.12946319580078, 86.97088623046875, -15.966327667236328],
   [78.09046173095703, 32.389347076416016, -6.073670864105225],
   [77.5141372680664, 27.829578399658203, -7.100390911102295],
   [74.32657623291016, 10.046077728271484, 4.335203170776367],
   [53.403228759765625, 26.719369888305664, 12.621842384338379],
   [76.59857940673828, 18.90060043334961, -1.4469518661499023],
   [50.4315185546875, 36.40534210205078, 10.005946159362793],
   [46.98637771606445, 35.17638397216797, 21.74476432800293],
   [90.62181854248047, 107.96405792236328, -16.666671752929688],
   [82.2608413696289, 107.97825622558594, -12.981619834899902],
   [76.13420104980469, 107.87385559082031, -7.978218078613281],
   [86.47156524658203, 89.35774230957031, -15.374303817749023],
   [67.82347106933594, 109.00955963134766, 2.1786484718322754],
   [71.36268615722656, 112.80679321289062, -1.203078031539917],
   [70.43789672851562, 109.38103485107422, 1.3957136869430542],
   [89.70130920410156, 86.9094009399414, -24.641624450683594],
   [79.03302764892578, 108.90005493164062, -5.975272178649902],
   [84.64810943603516, 109.67910766601562, -9.705985069274902],
   [91.39744567871094, 110.57366943359375, -12.461589813232422],
   [88.1072006225586, 131.217041015625, -9.822772026062012],
   [88.96946716308594, 125.93730163574219, -13.51905632019043],
   [89.64171600341797, 122.63509368896484, -13.554454803466797],
   [90.37659454345703, 119.91338348388672, -11.74137020111084],
   [91.16615295410156, 117.998046875, -10.553521156311035],
   [78.390869140625, 114.43834686279297, -4.505373954772949],
   [77.29698944091797, 114.98908996582031, -5.581000804901123],
   [75.67334747314453, 116.26705932617188, -6.540694236755371],
   [74.3451156616211, 117.9792709350586, -5.562975883483887],
   [70.75707244873047, 100.31256866455078, -6.900611877441406],
   [35.55931854248047, 81.97712707519531, 56.174678802490234],
   [101.74683380126953, 92.37580108642578, -22.637645721435547],
   [74.70909118652344, 112.65634155273438, -0.6792677640914917],
   [73.0319595336914, 112.50199127197266, -1.304067850112915],
   [92.44100189208984, 93.258544921875, -17.65826416015625],
   [81.40231323242188, 90.44721221923828, -11.767321586608887],
   [91.44450378417969, 91.96553039550781, -17.428884506225586],
   [77.52327728271484, 70.25492095947266, -3.998537540435791],
   [67.32196044921875, 72.92003631591797, -2.9818146228790283],
   [79.24305725097656, 83.86804962158203, -13.94941234588623],
   [59.76797866821289, 14.9196195602417, 13.644415855407715],
   [62.75826644897461, 20.980173110961914, 5.045314788818359],
   [65.82039642333984, 27.523681640625, -2.0928380489349365],
   [72.0169906616211, 121.51451873779297, -2.277813673019409],
   [91.20870208740234, 29.771142959594727, -9.15500545501709],
   [90.68650817871094, 19.541362762451172, -4.765499114990234],
   [89.67861938476562, 8.497458457946777, -0.5644832253456116],
   [61.8314208984375, 56.59713363647461, 5.0828471183776855],
   [47.816715240478516, 61.75600814819336, 12.65913200378418],
   [86.1757583618164, 55.865325927734375, 3.372938871383667],
   [55.17530059814453, 47.391395568847656, 8.041899681091309],
   [89.16114044189453, 64.17878723144531, -7.227434158325195],
   [85.9312515258789, 82.90008544921875, -24.510356903076172],
   [41.22966766357422, 65.61174011230469, 18.420610427856445],
   [51.321266174316406, 65.09765625, 7.297268390655518],
   [58.42702865600586, 67.10042572021484, 2.2070679664611816],
   [69.5953140258789, 67.12528991699219, 0.18376822769641876],
   [78.14128875732422, 65.66437530517578, -0.5989161133766174],
   [84.62466430664062, 63.51582717895508, -1.6761845350265503],
   [98.2154312133789, 56.61308670043945, -12.372230529785156],
   [40.00346374511719, 76.61636352539062, 16.163143157958984],
   [50.776588439941406, 46.16819763183594, 10.654502868652344],
   [98.81534576416016, 90.69960021972656, -30.0086612701416],
   [83.92247009277344, 73.02010345458984, -8.686209678649902],
   [36.805885314941406, 56.89435577392578, 53.42344284057617],
   [89.54713439941406, 60.69837188720703, -2.1316051483154297],
   [78.21299743652344, 84.09794616699219, -7.966947078704834],
   [57.52393341064453, 51.58583068847656, 9.6005220413208],
   [85.73983764648438, 79.0441665649414, -22.090085983276367],
   [35.9838981628418, 95.61518859863281, 52.74214553833008],
   [86.07156372070312, 53.91282272338867, 5.017544269561768],
   [91.81194305419922, 76.00779724121094, -27.407215118408203],
   [49.675594329833984, 122.17335510253906, 17.972929000854492],
   [50.39543914794922, 129.64012145996094, 26.667118072509766],
   [34.918643951416016, 79.67228698730469, 36.17057800292969],
   [42.599365234375, 114.64179229736328, 24.247556686401367],
   [42.57321548461914, 45.128849029541016, 29.976085662841797],
   [73.0156021118164, 142.9091339111328, -0.4929996728897095],
   [99.20965576171875, 92.0052719116211, -22.335628509521484],
   [77.69612884521484, 76.68165588378906, -7.048058986663818],
   [43.5438232421875, 55.563011169433594, 21.145282745361328],
   [67.58226013183594, 54.35944366455078, 3.434352397918701],
   [72.67212677001953, 54.98978042602539, 2.29081654548645],
   [69.75879669189453, 113.45913696289062, -0.4031379222869873],
   [39.15290832519531, 88.20699310302734, 17.510488510131836],
   [83.5011215209961, 151.25341796875, 0.025303233414888382],
   [66.3105697631836, 142.6812286376953, 12.036025047302246],
   [58.98088455200195, 137.2327423095703, 18.72884178161621],
   [106.55532836914062, 20.92632484436035, -5.268391132354736],
   [95.71882629394531, 152.92430114746094, -1.1094566583633423],
   [77.50601959228516, 55.049713134765625, 2.3564467430114746],
   [82.00977325439453, 54.594032287597656, 3.4358792304992676],
   [84.78653717041016, 54.28489685058594, 4.837896823883057],
   [46.858062744140625, 45.1269416809082, 16.28510856628418],
   [81.3348159790039, 50.45204544067383, 2.82338285446167],
   [76.4931869506836, 48.982688903808594, 1.7139623165130615],
   [71.64994812011719, 48.414634704589844, 1.6096364259719849],
   [66.55802154541016, 48.90406036376953, 2.743800163269043],
   [63.11028289794922, 49.99617385864258, 4.3361616134643555],
   [39.33680725097656, 43.69361114501953, 45.252403259277344],
   [64.11607360839844, 53.58354568481445, 5.089890956878662],
   [100.97249603271484, 97.9576416015625, -17.356704711914062],
   [77.23359680175781, 97.96604919433594, -11.295289039611816],
   [85.50794219970703, 87.4095458984375, -18.748830795288086],
   [91.06132507324219, 97.73428344726562, -17.12804412841797],
   [104.39678192138672, 47.862186431884766, -9.384198188781738],
   [57.60206604003906, 130.0492401123047, 12.866852760314941],
   [65.07611083984375, 136.42015075683594, 6.602966785430908],
   [83.43305206298828, 147.77230834960938, -6.3504228591918945],
   [43.867252349853516, 121.30915832519531, 36.73867416381836],
   [84.63063049316406, 52.57617950439453, 4.193847179412842],
   [93.39417266845703, 65.67539978027344, -15.310872077941895],
   [96.32454681396484, 149.2174530029297, -7.324632167816162],
   [74.11921691894531, 147.58111572265625, 4.841640472412109],
   [35.170021057128906, 92.35910034179688, 34.52197265625],
   [84.19357299804688, 116.36930847167969, -7.876378536224365],
   [82.97317504882812, 117.70378875732422, -8.963621139526367],
   [81.86216735839844, 119.80795288085938, -10.250941276550293],
   [80.87264251708984, 122.62751770019531, -9.650686264038086],
   [78.86158752441406, 127.09829711914062, -6.455252170562744],
   [72.64045715332031, 108.9233627319336, -2.2364752292633057],
   [70.8226318359375, 108.12559509277344, -2.168048858642578],
   [69.20361328125, 107.0699234008789, -2.3529465198516846],
   [65.05126953125, 103.59679412841797, -1.890215277671814],
   [46.00092697143555, 90.8358154296875, 6.268908977508545],
   [93.88638305664062, 60.126461029052734, -9.30872631072998],
   [91.20584106445312, 49.33966827392578, 1.559889554977417],
   [87.47809600830078, 50.5300407409668, 3.5149614810943604],
   [74.26765441894531, 108.43806457519531, -1.8566033840179443],
   [44.44458770751953, 105.34281921386719, 14.49073314666748],
   [96.57877349853516, 48.5963249206543, -5.850582599639893],
   [76.31098175048828, 131.783203125, -4.589075565338135],
   [103.57876586914062, 67.47496795654297, -25.961950302124023],
   [98.14827728271484, 62.70327377319336, -18.785736083984375],
   [103.81319427490234, 61.70405578613281, -19.824413299560547],
   [87.94727325439453, 74.32804107666016, -16.22620391845703],
   [96.90180969238281, 143.8046875, -9.918874740600586],
   [97.46548461914062, 137.3284149169922, -9.966526985168457],
   [86.34243774414062, 136.39527893066406, -8.909187316894531],
   [62.909244537353516, 117.86885833740234, 3.661519765853882],
   [72.83123779296875, 88.2660140991211, -6.506338596343994],
   [68.90264892578125, 125.59513854980469, -0.04668552428483963],
   [59.514976501464844, 86.42430114746094, -4.603578567504883],
   [66.6302719116211, 93.31221008300781, -4.824153423309326],
   [53.3405647277832, 95.0945053100586, 0.2903487980365753],
   [84.33870697021484, 142.5856475830078, -8.7600736618042],
   [83.35369110107422, 77.27277374267578, -12.522512435913086],
   [58.90953826904297, 122.8059310913086, 7.648026943206787],
   [66.37518310546875, 130.31826782226562, 3.135725736618042],
   [58.12430191040039, 109.57536315917969, 3.833447217941284],
   [39.689659118652344, 98.36279296875, 19.181901931762695],
   [51.50564193725586, 111.2844009399414, 8.291789054870605],
   [37.378089904785156, 104.14383697509766, 31.630699157714844],
   [60.63956069946289, 99.32401275634766, -1.5200861692428589],
   [88.82510375976562, 69.3885269165039, -11.668965339660645],
   [87.83255767822266, 85.7822265625, -25.788440704345703],
   [82.93170166015625, 86.71166229248047, -19.693078994750977],
   [91.2426986694336, 81.95452880859375, -29.615520477294922],
   [86.92947387695312, 43.51471710205078, 0.04873010143637657],
   [77.93462371826172, 39.57335662841797, -1.082930564880371],
   [69.91551971435547, 38.723915100097656, -1.1414790153503418],
   [63.01692581176758, 39.72351837158203, 0.7501389384269714],
   [58.021114349365234, 42.48860549926758, 3.8951785564422607],
   [53.73503875732422, 52.95244216918945, 11.844511032104492],
   [35.86049270629883, 67.8950424194336, 35.77280807495117],
   [57.2962646484375, 60.25185012817383, 6.8902177810668945],
   [63.23069381713867, 61.9343376159668, 3.7367122173309326],
   [70.90768432617188, 62.37810134887695, 1.7237446308135986],
   [78.36196899414062, 61.65829849243164, 0.886727511882782],
   [84.20085906982422, 60.225563049316406, 1.3185296058654785],
   [88.23660278320312, 58.51911163330078, 1.0940423011779785],
   [36.11067199707031, 69.34859466552734, 56.70667266845703],
   [82.53809356689453, 88.08721923828125, -16.831117630004883],
   [93.15030670166016, 70.62931060791016, -20.568584442138672],
   [92.62765502929688, 86.4273452758789, -30.072904586791992],
   [95.62818908691406, 89.56297302246094, -27.69458770751953],
   [92.37344360351562, 87.42980194091797, -27.319673538208008],
   [83.7394790649414, 89.86900329589844, -14.858389854431152],
   [96.85797882080078, 90.1900863647461, -29.201383590698242],
   [97.04364013671875, 91.4603500366211, -22.43378448486328],
   [88.24444580078125, 54.17407989501953, 4.141025543212891],
   [91.53496551513672, 55.46815872192383, 0.8469892144203186],
   [93.447998046875, 56.27771759033203, -3.3070316314697266],
   [61.00328063964844, 50.82959747314453, 6.181829929351807],
   [58.13917922973633, 48.065494537353516, 6.389158248901367],
   [108.47984313964844, 68.70999908447266, -23.690744400024414],
   [143.32432556152344, 57.628265380859375, 11.153042793273926],
   [107.8163833618164, 91.01478576660156, -22.000614166259766],
   [161.7184600830078, 40.37016296386719, 41.5375862121582],
   [126.62661743164062, 61.13447570800781, 4.174936771392822],
   [132.15443420410156, 61.822303771972656, 4.913525581359863],
   [137.589599609375, 61.975547790527344, 6.797666072845459],
   [145.24581909179688, 59.77825164794922, 12.093485832214355],
   [122.12349700927734, 59.565608978271484, 4.6582441329956055],
   [135.7288360595703, 46.82320785522461, 3.3924307823181152],
   [129.5829315185547, 46.92454147338867, 3.2460577487945557],
   [141.44805908203125, 48.21363830566406, 5.538181304931641],
   [145.04652404785156, 50.8084831237793, 7.9378275871276855],
   [149.04440307617188, 63.728668212890625, 15.05921745300293],
   [119.78095245361328, 139.46730041503906, -0.8875952363014221],
   [145.49534606933594, 56.62916564941406, 13.32433795928955],
   [163.19921875, 63.757118225097656, 42.09659194946289],
   [154.88894653320312, 60.65314865112305, 21.577903747558594],
   [131.95864868164062, 83.91796112060547, -3.5816152095794678],
   [109.58872985839844, 105.43135833740234, -16.845962524414062],
   [108.1416244506836, 110.92094421386719, -14.067085266113281],
   [118.78202819824219, 106.86062622070312, -12.36950397491455],
   [124.28616333007812, 108.42642974853516, -6.2102789878845215],
   [115.01956939697266, 110.98548889160156, -10.517330169677734],
   [120.0958480834961, 111.13988494873047, -5.0118608474731445],
   [129.85804748535156, 118.39523315429688, 4.064609527587891],
   [107.49179077148438, 87.97893524169922, -32.32497024536133],
   [108.72637176513672, 82.0206527709961, -33.842445373535156],
   [153.20635986328125, 44.85203552246094, 10.682412147521973],
   [120.06440734863281, 69.64909362792969, -3.497210741043091],
   [121.99930572509766, 86.68402099609375, -17.235862731933594],
   [122.43922424316406, 83.6367416381836, -15.209391593933105],
   [148.29559326171875, 83.56676483154297, 5.523083686828613],
   [108.73179626464844, 74.75940704345703, -29.949941635131836],
   [141.8105926513672, 36.657039642333984, 0.6166184544563293],
   [148.78863525390625, 39.680938720703125, 5.4735822677612305],
   [157.96083068847656, 29.725887298583984, 30.705049514770508],
   [117.4897689819336, 39.180938720703125, -6.215536117553711],
   [124.1707534790039, 48.653411865234375, 4.4875807762146],
   [135.1669158935547, 111.67082214355469, 5.638181209564209],
   [153.48902893066406, 115.84920501708984, 53.13123321533203],
   [117.54773712158203, 89.78553771972656, -15.429283142089844],
   [112.34222412109375, 91.59508514404297, -16.388198852539062],
   [130.9450225830078, 111.6211929321289, 5.6632609367370605],
   [127.96855163574219, 111.72905731201172, 4.055528163909912],
   [151.79335021972656, 36.436424255371094, 8.57150650024414],
   [122.36725616455078, 89.07838439941406, -14.201544761657715],
   [131.82882690429688, 35.82680892944336, -3.5216751098632812],
   [133.21466064453125, 31.369142532348633, -4.416381359100342],
   [138.69740295410156, 14.297223091125488, 8.030227661132812],
   [154.95428466796875, 33.11442947387695, 18.32139015197754],
   [135.46229553222656, 22.727811813354492, 1.7431676387786865],
   [156.25326538085938, 42.93220901489258, 15.950555801391602],
   [158.9871826171875, 42.11713790893555, 28.209699630737305],
   [109.0037612915039, 108.7624282836914, -15.893869400024414],
   [116.71968078613281, 109.40382385253906, -11.49129581451416],
   [122.20979309082031, 109.8419189453125, -6.007250785827637],
   [116.10448455810547, 90.78648376464844, -14.27552604675293],
   [129.56480407714844, 111.65995788574219, 4.793562412261963],
   [126.03915405273438, 115.13420104980469, 0.9778055548667908],
   [126.78901672363281, 111.78221130371094, 3.90008807182312],
   [114.04186248779297, 88.15567016601562, -23.396221160888672],
   [118.82915496826172, 110.57353210449219, -4.274890422821045],
   [113.61614227294922, 110.88284301757812, -8.438836097717285],
   [107.20777893066406, 111.18995666503906, -11.761241912841797],
   [107.5516128540039, 132.01478576660156, -9.178442001342773],
   [108.02532958984375, 126.72571563720703, -12.769770622253418],
   [108.04769134521484, 123.4239273071289, -12.841782569885254],
   [107.7825927734375, 120.64469146728516, -10.938895225524902],
   [107.25479125976562, 118.62671661376953, -9.797183990478516],
   [119.33467102050781, 116.12677764892578, -2.8425216674804688],
   [120.39054107666016, 116.80894470214844, -3.825718879699707],
   [121.73579406738281, 118.24962615966797, -4.783413410186768],
   [122.7627944946289, 120.0499038696289, -3.724756956100464],
   [128.66961669921875, 103.02430725097656, -4.383663654327393],
   [160.3846435546875, 88.97438049316406, 63.59035873413086],
   [122.69666290283203, 114.69432830810547, 1.449454665184021],
   [124.47103881835938, 114.69676971435547, 0.8228784799575806],
   [110.07894134521484, 94.13414001464844, -16.954927444458008],
   [120.39009857177734, 92.36306762695312, -10.365896224975586],
   [111.16242980957031, 92.92293548583984, -16.7852725982666],
   [126.06163024902344, 73.01152801513672, -1.4653081893920898],
   [135.30702209472656, 76.75660705566406, 0.40760326385498047],
   [123.4511947631836, 86.12890625, -11.999129295349121],
   [150.95062255859375, 20.80929946899414, 18.88531494140625],
   [147.70941162109375, 26.398067474365234, 9.5996732711792],
   [144.1142578125, 32.49728012084961, 1.9582020044326782],
   [124.05244445800781, 123.84002685546875, -0.06022791564464569],
   [119.88780975341797, 31.68518829345703, -7.773906707763672],
   [122.07637023925781, 21.591842651367188, -3.078237771987915],
   [124.6456527709961, 10.792311668395996, 1.2410918474197388],
   [142.3772430419922, 61.4198112487793, 9.555315017700195],
   [154.5585174560547, 67.96864318847656, 18.354141235351562],
   [119.36286163330078, 57.88399124145508, 5.360065460205078],
   [150.14471435546875, 53.140625, 13.304478645324707],
   [116.21031951904297, 65.78741455078125, -5.64819860458374],
   [118.14901733398438, 84.61162567138672, -23.022424697875977],
   [159.78895568847656, 72.43616485595703, 24.917848587036133],
   [150.95855712890625, 70.87600708007812, 12.582015991210938],
   [144.1939239501953, 72.06324005126953, 6.703146457672119],
   [133.73040771484375, 70.84264373779297, 3.6086008548736572],
   [125.89620208740234, 68.46342468261719, 2.0271527767181396],
   [120.11212921142578, 65.63156127929688, 0.2998296618461609],
   [109.33324432373047, 57.29981994628906, -11.777852058410645],
   [159.39114379882812, 83.24105834960938, 22.550973892211914],
   [154.304931640625, 52.437931060791016, 16.444591522216797],
   [105.13921356201172, 91.01277923583984, -29.6685791015625],
   [120.00846099853516, 75.0198974609375, -6.788751602172852],
   [163.27871704101562, 64.38885498046875, 61.05054473876953],
   [116.00743103027344, 62.29135513305664, -0.5878174901008606],
   [123.9459228515625, 86.42569732666016, -6.051175594329834],
   [147.22203063964844, 56.97154235839844, 14.573186874389648],
   [118.56124114990234, 80.7939453125, -20.566730499267578],
   [157.95077514648438, 102.15831756591797, 59.892791748046875],
   [119.67066192626953, 55.93624496459961, 7.058768272399902],
   [113.68561553955078, 77.1753921508789, -26.326637268066406],
   [143.38197326660156, 126.79964447021484, 22.85887908935547],
   [140.74876403808594, 133.98423767089844, 31.711563110351562],
   [162.6841278076172, 86.71691131591797, 43.2846794128418],
   [150.74029541015625, 120.08995056152344, 30.043107986450195],
   [161.166259765625, 52.28229904174805, 36.86079025268555],
   [119.55876922607422, 145.04042053222656, 1.7983216047286987],
   [104.28083038330078, 92.27243041992188, -22.148406982421875],
   [125.17610168457031, 79.27139282226562, -4.817952632904053],
   [159.09803771972656, 62.36928176879883, 27.605148315429688],
   [137.38668823242188, 58.58735656738281, 7.366579532623291],
   [132.42715454101562, 58.68166732788086, 5.748974800109863],
   [127.45439910888672, 115.93232727050781, 1.997886061668396],
   [158.37428283691406, 94.59625244140625, 23.66580581665039],
   [107.86556243896484, 152.36422729492188, 1.364822506904602],
   [124.92013549804688, 145.40548706054688, 15.28676986694336],
   [132.12982177734375, 140.6704864501953, 22.839834213256836],
   [127.74446868896484, 58.18498992919922, 5.306678295135498],
   [123.4649658203125, 57.18648147583008, 5.945484161376953],
   [120.84716796875, 56.48582458496094, 7.051456928253174],
   [157.81744384765625, 51.844661712646484, 22.601152420043945],
   [124.68569946289062, 53.13053894042969, 5.40255069732666],
   [129.5623779296875, 52.248287200927734, 4.693426609039307],
   [134.37509155273438, 52.240943908691406, 5.205009937286377],
   [139.238525390625, 53.301998138427734, 6.783327102661133],
   [142.3788299560547, 54.77095413208008, 8.716156959533691],
   [163.44961547851562, 51.23394775390625, 52.81007385253906],
   [140.82699584960938, 58.17151641845703, 9.33840274810791],
   [123.18972778320312, 100.13630676269531, -9.410456657409668],
   [117.54778289794922, 89.028564453125, -17.455589294433594],
   [110.48583221435547, 98.61077117919922, -16.303319931030273],
   [135.1275634765625, 133.7756805419922, 16.802946090698242],
   [127.53564453125, 139.3105010986328, 9.729269981384277],
   [109.06908416748047, 148.95916748046875, -5.166405200958252],
   [147.5255584716797, 126.51371765136719, 42.689476013183594],
   [121.28661346435547, 54.75267791748047, 6.413392543792725],
   [112.77035522460938, 66.78667449951172, -14.222667694091797],
   [117.23631286621094, 149.56549072265625, 7.226095199584961],
   [160.54310607910156, 99.02458953857422, 41.38239669799805],
   [113.91871643066406, 117.60375213623047, -6.59886360168457],
   [114.91532897949219, 118.99433135986328, -7.649716377258301],
   [115.7022476196289, 121.23411560058594, -8.943921089172363],
   [116.16574096679688, 124.13211059570312, -8.288385391235352],
   [116.95421600341797, 128.7209014892578, -4.891276836395264],
   [124.9439926147461, 111.124755859375, -0.014589421451091766],
   [126.94059753417969, 110.52748107910156, 0.3120989203453064],
   [128.69325256347656, 109.6543960571289, 0.25311970710754395],
   [133.2813262939453, 106.75492858886719, 1.2125319242477417],
   [152.21597290039062, 96.45463562011719, 11.473971366882324],
   [112.64171600341797, 61.252071380615234, -8.274959564208984],
   [115.92403411865234, 50.87300491333008, 2.9581949710845947],
   [119.00031280517578, 52.47746658325195, 5.452916622161865],
   [123.23123931884766, 110.49980163574219, 0.2855774164199829],
   [151.08187866210938, 110.79768371582031, 19.830310821533203],
   [111.53140258789062, 49.54329299926758, -5.034388065338135],
   [118.43335723876953, 133.70028686523438, -2.8058559894561768],
   [109.01187133789062, 63.347496032714844, -18.208751678466797],
   [116.66332244873047, 75.8707504272461, -14.900350570678711],
   [108.38938903808594, 137.3669891357422, -7.997170925140381],
   [132.6570281982422, 121.21564483642578, 6.807666301727295],
   [128.30490112304688, 91.09563446044922, -4.117912769317627],
   [126.11762237548828, 128.23956298828125, 2.446568012237549],
   [140.90121459960938, 90.72127532958984, -0.8963569402694702],
   [133.32254028320312, 96.67829132080078, -1.8336243629455566],
   [145.13011169433594, 99.85160827636719, 4.524258613586426],
   [109.27949523925781, 143.7198028564453, -7.570011138916016],
   [120.25299072265625, 79.25051879882812, -10.798274993896484],
   [135.40353393554688, 126.5248031616211, 11.347061157226562],
   [127.60249328613281, 133.19076538085938, 5.88818883895874],
   [138.44491577148438, 113.44232940673828, 7.6501874923706055],
   [156.1746368408203, 104.49191284179688, 25.145626068115234],
   [144.02468872070312, 115.87178039550781, 12.676740646362305],
   [156.8421173095703, 110.3907241821289, 38.19138717651367],
   [137.84219360351562, 103.12545776367188, 1.983381748199463],
   [116.19281005859375, 70.93698120117188, -10.204596519470215],
   [116.05950164794922, 87.22758483886719, -24.446495056152344],
   [120.0864486694336, 88.58157348632812, -18.141830444335938],
   [113.73173522949219, 83.14476013183594, -28.56938362121582],
   [120.96643829345703, 45.64632797241211, 1.9504035711288452],
   [130.32383728027344, 42.87081527709961, 1.6975287199020386],
   [138.1953582763672, 42.978057861328125, 2.538086175918579],
   [144.56442260742188, 44.7658576965332, 5.1895318031311035],
   [148.57069396972656, 48.033531188964844, 8.84899616241455],
   [150.40122985839844, 58.743194580078125, 17.067996978759766],
   [163.5419921875, 75.17352294921875, 43.074485778808594],
   [146.04251098632812, 65.50643157958984, 11.733964920043945],
   [140.30657958984375, 66.5009765625, 7.884613513946533],
   [133.0005340576172, 66.07418823242188, 5.1401286125183105],
   [126.0435791015625, 64.55621337890625, 3.6102993488311768],
   [120.74637603759766, 62.44287872314453, 3.3228533267974854],
   [117.19612121582031, 60.3218994140625, 2.7820541858673096],
   [161.74295043945312, 76.60386657714844, 64.39147186279297],
   [120.0455093383789, 89.93124389648438, -15.316427230834961],
   [112.75672149658203, 71.76898193359375, -19.50297737121582],
   [111.790771484375, 87.43096160888672, -29.245662689208984],
   [108.17181396484375, 90.18372344970703, -27.213787078857422],
   [111.61674499511719, 88.3999252319336, -26.4291934967041],
   [118.4921646118164, 91.56812286376953, -13.529046058654785],
   [107.05856323242188, 90.69583892822266, -28.79757308959961],
   [106.35114288330078, 91.92131805419922, -22.08680534362793],
   [117.67338562011719, 55.97578811645508, 5.90795373916626],
   [114.62321472167969, 56.908504486083984, 2.155444860458374],
   [113.0697021484375, 57.47984313964844, -2.249373197555542],
   [144.21607971191406, 55.840450286865234, 10.668397903442383],
   [147.34129333496094, 53.494239807128906, 11.25536060333252]],
  'scaledMesh': [[524.7154871958799, 52.53679373264964, -17.962202072143555],
   [525.4400239156463, 46.36201244080919, -33.01103973388672],
   [525.1208903490108, 48.39813444059382, -18.80295753479004],
   [524.0865499586298, 39.7240396620008, -24.333669662475586],
   [525.6307116534998, 44.27805383242172, -34.75718688964844],
   [525.7735406623436, 41.63275057647676, -32.00141143798828],
   [526.0088329715852, 35.40783215372692, -14.364148139953613],
   [511.7132448049903, 34.53743838720885, 6.6556243896484375],
   [526.3249385003129, 30.24917386836136, -8.6515474319458],
   [526.5314841120145, 27.57817161536809, -8.918135643005371],
   [527.1411618484162, 19.855033124835753, -1.0126651525497437],
   [524.633238607775, 53.48346849308426, -17.1035099029541],
   [524.522046696292, 54.14436726032823, -15.4761323928833],
   [524.4530506896796, 54.262308353706224, -13.147005081176758],
   [524.4100584501645, 56.808991462695985, -11.324355125427246],
   [524.3475707587953, 57.57999578366704, -12.530474662780762],
   [524.2684288589335, 58.520693118621395, -14.290310859680176],
   [524.1613169335925, 59.585466273104544, -14.078422546386719],
   [523.940604430251, 61.2183897869687, -10.279136657714844],
   [525.3219500998275, 47.45919690689104, -30.2066650390625],
   [523.1567948515693, 47.21636891240183, -22.504655838012695],
   [505.6544997937206, 27.908719311909156, 34.36530303955078],
   [517.3027520847685, 36.361686215077576, 1.2898379564285278],
   [515.3570705970714, 36.380618825469995, 1.452303171157837],
   [513.4608208450892, 36.23260872579045, 2.8066177368164062],
   [510.8592545490213, 35.17197946084666, 7.349088191986084],
   [518.9500833569242, 36.02696267729846, 2.3948090076446533],
   [515.0259526855996, 31.209172487154706, -0.28084683418273926],
   [517.1097146681489, 31.488705609983576, 0.3370141088962555],
   [512.9890859654529, 31.45479748419183, 1.221291422843933],
   [511.5858951652561, 32.17313065876412, 3.318373680114746],
   [509.26551364905765, 36.356952448023726, 9.931183815002441],
   [515.865427039066, 63.02000843868748, -2.9363300800323486],
   [510.99103810140616, 34.1061568159523, 8.599652290344238],
   [503.82817018979034, 35.77748872947923, 34.8884391784668],
   [507.30233246176374, 35.076370147038375, 15.784820556640625],
   [514.549213678382, 43.91088457352221, -6.502586364746094],
   [521.5283396598776, 52.0028169439419, -17.61862564086914],
   [521.571813632696, 53.88568630763688, -14.761523246765137],
   [518.1475549984492, 52.20235284451288, -13.968961715698242],
   [515.9920737414288, 52.55866835714562, -8.376557350158691],
   [519.0921356937074, 53.698316630802424, -11.876150131225586],
   [517.214349107929, 53.59973826683784, -6.821621417999268],
   [513.3813151874267, 55.6663397293612, 1.3646939992904663],
   [523.6874879887797, 46.21881721634173, -32.72358703613281],
   [523.611973835632, 44.17948038410309, -34.30792236328125],
   [509.0156218713323, 29.818845932419915, 5.243154048919678],
   [519.3761568012924, 39.53788660754, -5.391360282897949],
   [518.2941297295101, 45.27531058972457, -19.043554306030273],
   [518.2046551418526, 44.21714652122678, -17.121503829956055],
   [508.6371859519059, 43.15145905659617, 0.7449142336845398],
   [523.8613052297186, 41.74312649073131, -30.52549171447754],
   [513.6990822044869, 27.52750113687268, -3.169182538986206],
   [511.00906377512, 28.271570175837944, 0.7105515003204346],
   [507.8318655065289, 24.49126024492839, 24.31058120727539],
   [522.0437254755867, 29.426420084607965, -7.454439163208008],
   [518.8424061322985, 32.30394828671902, 2.147148847579956],
   [511.8486905136111, 53.257191478522685, 2.346583843231201],
   [504.02754878969074, 53.7916106753663, 46.41720962524414],
   [519.6764388656937, 46.4791694886575, -16.776275634765625],
   [521.4088698006078, 47.258530407750605, -17.099227905273438],
   [513.3490931281972, 53.42328132402161, 2.8073291778564453],
   [514.3451455522413, 53.55656906406847, 1.5499314069747925],
   [510.08567442957025, 27.053814745792625, 3.45438551902771],
   [517.9566706347575, 46.063468057252635, -15.966327667236328],
   [517.2704562908497, 27.694318497972816, -6.073670864105225],
   [517.0764996484367, 26.15975214400531, -7.100390911102295],
   [516.003743484924, 20.174802038710855, 4.335203170776367],
   [508.9621347277052, 25.786116352853114, 12.621842384338379],
   [516.7683722130924, 23.154748953188175, -1.4469518661499023],
   [507.962021980103, 29.045882726536135, 10.005946159362793],
   [506.80258823148074, 28.632282733776673, 21.74476432800293],
   [521.4878052433396, 53.12861784294586, -16.666671752929688],
   [518.6739715236795, 53.133395850813294, -12.981619834899902],
   [516.612093996918, 53.09825881353301, -7.978218078613281],
   [520.0910637706346, 46.8667534252046, -15.374303817749023],
   [513.8151700993402, 53.48047978034413, 2.1786484718322754],
   [515.0062704391992, 54.75841992162913, -1.203078031539917],
   [514.6950412312578, 53.60549448825015, 1.3957136869430542],
   [521.178011404017, 46.04277564560863, -24.641624450683594],
   [517.5876727555631, 53.443622266979894, -5.975272178649902],
   [519.4773896140722, 53.70581299088251, -9.705985069274902],
   [521.748835874797, 54.00686681169866, -12.461589813232422],
   [520.6415227202266, 60.95429670808183, -9.822772026062012],
   [520.9317129634841, 59.177423418096254, -13.51905632019043],
   [521.157955568524, 58.066084349489415, -13.554454803466797],
   [521.4052715477693, 57.15010779803848, -11.74137020111084],
   [521.670991705467, 56.505509312778486, -10.553521156311035],
   [517.3715563811887, 55.30750740599993, -4.505373954772949],
   [517.0034187400363, 55.49285675234722, -5.581000804901123],
   [516.4569955357726, 55.92295119510585, -6.540694236755371],
   [516.0099863552857, 56.49918779208144, -5.562975883483887],
   [514.8024530110021, 50.553546878570856, -6.900611877441406],
   [502.95688669135455, 44.382843115049376, 56.174678802490234],
   [525.2318463094879, 47.882463517419346, -22.637645721435547],
   [516.1324793368173, 54.707783852655396, -0.6792677640914917],
   [515.5680501214235, 54.65584022185786, -1.304067850112915],
   [522.1000391156374, 48.179550411950494, -17.65826416015625],
   [518.3850396857863, 47.233411456924884, -11.767321586608887],
   [521.7646740860613, 47.74439285385909, -17.428884506225586],
   [517.079571927158, 40.4377939123668, -3.998537540435791],
   [513.6463864798584, 41.33472479356837, -2.9818146228790283],
   [517.6583548287379, 45.01922509809701, -13.94941234588623],
   [511.1041471148112, 21.81496875688845, 13.644415855407715],
   [512.1105125640671, 23.854618961556675, 5.045314788818359],
   [513.1410482444795, 26.056803770787482, -2.0928380489349365],
   [515.2264717153614, 57.688960907532746, -2.277813673019409],
   [521.6853158977775, 26.81317667157599, -9.15500545501709],
   [521.5095717236246, 23.37039342555092, -4.765499114990234],
   [521.1703724902042, 19.65362190533326, -0.5644832253456116],
   [511.79858533440034, 35.84133313913178, 5.0828471183776855],
   [507.0820328726824, 37.577524543200774, 12.65913200378418],
   [519.9915121087711, 35.59504452989084, 3.372938871383667],
   [509.5585156418009, 32.74318583095237, 8.041899681091309],
   [520.9962209853404, 38.392899942376985, -7.227434158325195],
   [519.9092241954986, 44.69346032506933, -24.510356903076172],
   [504.8652043541542, 38.87515430435513, 18.420610427856445],
   [508.2614634690462, 38.70214077152978, 7.297268390655518],
   [510.6528613223442, 39.37616185564836, 2.2070679664611816],
   [514.4114723631006, 39.38453074288531, 0.18376822769641876],
   [517.2875627387701, 38.89286783455092, -0.5989161133766174],
   [519.4695000023158, 38.16978368816393, -1.6761845350265503],
   [524.0433807558604, 35.846701024513706, -12.372230529785156],
   [504.4525309606571, 42.57870519477909, 16.163143157958984],
   [508.07815411576985, 32.33152260269885, 10.654502868652344],
   [524.2452761664894, 47.31834890336669, -30.0086612701416],
   [519.2331803230699, 41.36840188400027, -8.686209678649902],
   [503.3764075796658, 35.941361618652834, 53.42344284057617],
   [521.1261218453249, 37.22158261966055, -2.1316051483154297],
   [517.311698560405, 45.096594907592404, -7.966947078704834],
   [510.3489318486449, 34.1548020483146, 9.6005220413208],
   [519.8448046552694, 43.39577157616353, -22.090085983276367],
   [503.0997746879499, 48.97266530842332, 52.74214553833008],
   [519.9564438905342, 34.93794064132347, 5.017544269561768],
   [521.8883320756839, 42.3738948060993, -27.407215118408203],
   [507.7076225550377, 57.91068603394078, 17.972929000854492],
   [507.94988033459623, 60.4235888239336, 26.667118072509766],
   [502.74127171286756, 43.60716155695295, 36.17057800292969],
   [505.32616413785894, 55.375977438495326, 24.247556686401367],
   [505.317365131601, 31.98173506789322, 29.976085662841797],
   [515.5625445979549, 64.88921230662991, -0.4929996728897095],
   [524.3779789446677, 47.75776341085439, -22.335628509521484],
   [517.1377436813794, 42.600678132194155, -7.048058986663818],
   [505.6440196365464, 35.493302947754756, 21.145282745361328],
   [513.7339931220533, 35.08824634766361, 3.434352397918701],
   [515.446953183343, 35.30038596446104, 2.29081654548645],
   [514.4664931882655, 54.977962501233506, -0.4031379222869873],
   [504.1662830654548, 46.47947425870665, 17.510488510131836],
   [519.0913786842304, 67.69743727425634, 0.025303233414888382],
   [513.306012407055, 64.81251348280726, 12.036025047302246],
   [510.8392577012798, 62.97884973511336, 18.72884178161621],
   [526.8501162827628, 23.836496203835203, -5.268391132354736],
   [523.2031690555009, 68.25976750882764, -1.1094566583633423],
   [517.0737665492861, 35.32055485981093, 2.3564467430114746],
   [518.5894764853736, 35.16719653733327, 3.4358792304992676],
   [519.5239751907798, 35.063159348536594, 4.837896823883057],
   [506.7593993661275, 31.98109603391918, 16.28510856628418],
   [518.3623195701862, 33.7732324045924, 2.82338285446167],
   [516.7329058275333, 33.27872825289651, 1.7139623165130615],
   [515.1029464481795, 33.08755140827056, 1.6096364259719849],
   [513.3892883651644, 33.2522673307253, 2.743800163269043],
   [512.2289796315622, 33.61981017871733, 4.3361616134643555],
   [504.22817596366355, 31.49871386514623, 45.252403259277344],
   [512.5674710119652, 34.82712231893305, 5.089890956878662],
   [524.9712580861664, 49.76100711267467, -17.356704711914062],
   [516.9820848365953, 49.76383852474426, -11.295289039611816],
   [519.7667589444553, 46.21109719437074, -18.748830795288086],
   [521.6357170301001, 49.68583705474376, -17.12804412841797],
   [526.1236722923661, 32.901629389169614, -9.384198188781738],
   [510.3752256388537, 60.561276067109425, 12.866852760314941],
   [512.8905665892397, 62.70537760374596, 6.602966785430908],
   [519.0684717740841, 66.52589137400304, -6.3504228591918945],
   [505.75286186926326, 57.619846925417356, 36.73867416381836],
   [519.4715055858651, 34.48810004876702, 4.193847179412842],
   [522.4208194236676, 38.89657668942333, -15.310872077941895],
   [523.4070159775736, 67.01224538470694, -7.324632167816162],
   [515.9339609749588, 66.46154556846318, 4.841640472412109],
   [502.8258699797385, 47.87684493409375, 34.52197265625],
   [519.3244196276249, 55.95736563243088, -7.876378536224365],
   [518.9137026612176, 56.406478709386114, -8.963621139526367],
   [518.5397989673609, 57.114621749895456, -10.250941276550293],
   [518.2067787009048, 58.06353312923921, -9.650686264038086],
   [517.5299729033533, 59.56815336805401, -6.455252170562744],
   [515.4362911472684, 53.45146763792272, -2.2364752292633057],
   [514.8245193456903, 53.182984887198785, -2.168048858642578],
   [514.2796494855481, 52.82770166021642, -2.3529465198516846],
   [512.8822050754717, 51.658839702654085, -1.890215277671814],
   [506.4709394302459, 47.36419221753512, 6.268908977508545],
   [522.5864717766766, 37.029110502325686, -9.30872631072998],
   [521.6843524311704, 33.39886664001601, 1.559889554977417],
   [520.4298009333353, 33.79948195398758, 3.5149614810943604],
   [515.9839137691449, 53.28814038545003, -1.8566033840179443],
   [505.947162606893, 52.24645602001355, 14.49073314666748],
   [523.4925727954056, 33.14869958611725, -5.850582599639893],
   [516.6715831442552, 61.14483206091075, -4.589075565338135],
   [525.8483764563497, 39.50221376485071, -25.961950302124023],
   [524.0207786157632, 37.89632384591142, -18.785736083984375],
   [525.9272725739139, 37.560042048364835, -19.824413299560547],
   [520.5877013126747, 41.808580774433835, -16.22620391845703],
   [523.6012872213277, 65.1906053070169, -9.918874740600586],
   [523.7909918299904, 63.011047216113056, -9.966526985168457],
   [520.047604544754, 62.69700625868603, -8.909187316894531],
   [512.1613206806493, 56.462030424314, 3.661519765853882],
   [515.5004993147217, 46.49933838400739, -6.506338596343994],
   [514.1783576850169, 59.06226949597426, -0.04668552428483963],
   [511.01900321123935, 45.87951967000227, -4.603578567504883],
   [513.4136060656995, 48.197610495186055, -4.824153423309326],
   [508.94104169091594, 48.79743236144967, 0.2903487980365753],
   [519.3732614858254, 64.78034549568328, -8.7600736618042],
   [519.0417601539692, 42.79961678178171, -12.522512435913086],
   [510.81524477079375, 58.12357774456919, 7.648026943206787],
   [513.3277592247562, 60.651817349938966, 3.135725736618042],
   [510.5509796442985, 53.67089224202421, 3.833447217941284],
   [504.34692322297803, 49.897357300150965, 19.181901931762695],
   [508.32351366792545, 54.24606214382775, 8.291789054870605],
   [503.56897800991976, 51.84294047492902, 31.630699157714844],
   [511.39747354018743, 50.22085596039378, -1.5200861692428589],
   [520.8831316345193, 40.14621254130431, -11.668965339660645],
   [520.5490938293507, 45.66343033168068, -25.788440704345703],
   [518.8997471423537, 45.9762276306813, -19.693078994750977],
   [521.6967546059128, 44.3752386107583, -29.615520477294922],
   [520.2451692712973, 31.438507033499764, 0.04873010143637657],
   [517.2180112641648, 30.112064213585143, -1.082930564880371],
   [514.5192380693536, 29.82618744965244, -1.1414790153503418],
   [512.1975588226233, 30.162599511816815, 0.7501389384269714],
   [510.51625060563237, 31.09317553175158, 3.8951785564422607],
   [509.07380345684567, 34.614727088546005, 11.844511032104492],
   [503.05824239528323, 39.64358774249215, 35.77280807495117],
   [510.2723067595116, 37.07130886501912, 6.8902177810668945],
   [512.2695042168083, 37.63754212247801, 3.7367122173309326],
   [514.8531382364354, 37.78688682003411, 1.7237446308135986],
   [517.3618283178455, 37.54464132959047, 0.886727511882782],
   [519.3268676193101, 37.062463160124615, 1.3185296058654785],
   [520.6850704277344, 36.48816332765496, 1.0940423011779785],
   [503.142437579186, 40.13277316526565, 56.70667266845703],
   [518.7672803151812, 46.4391659618826, -16.831117630004883],
   [522.338747798817, 40.563791749463654, -20.568584442138672],
   [522.1628512396396, 45.88054212436074, -30.072904586791992],
   [523.1726625567094, 46.93582316650641, -27.69458770751953],
   [522.0772993374535, 46.217915195309146, -27.319673538208008],
   [519.1715971105563, 47.038815780537824, -14.858389854431152],
   [523.5865402834653, 47.14687642554797, -29.201383590698242],
   [523.6490230591885, 47.5743754072428, -22.43378448486328],
   [520.6877150452578, 35.02586434268243, 4.141025543212891],
   [521.7951117658095, 35.46138074292848, 0.8469892144203186],
   [522.4389335790087, 35.7338328777604, -3.3070316314697266],
   [511.5198780400918, 33.9002969368613, 6.181829929351807],
   [510.55598868752577, 32.970050265205465, 6.389158248901367],
   [527.4978017936819, 39.917856208504126, -23.690744400024414],
   [539.2244783002824, 36.18835316526521, 11.153042793273926],
   [527.2745134918605, 47.42442362741136, -22.000614166259766],
   [545.4148987197259, 30.380222531676104, 41.5375862121582],
   [533.604980664538, 37.368351518736674, 4.174936771392822],
   [535.465326538471, 37.599836660186675, 4.913525581359863],
   [537.2944973857627, 37.65141161753765, 6.797666072845459],
   [539.871151188135, 36.91192150277868, 12.093485832214355],
   [532.0894870168726, 36.84035707115514, 4.6582441329956055],
   [536.6682735850794, 32.551964745512834, 3.3924307823181152],
   [534.5999074056585, 32.58606949714275, 3.2460577487945557],
   [538.5930340835956, 33.019907204295464, 5.538181304931641],
   [539.8040722834446, 33.893188912811596, 7.9378275871276855],
   [541.1495337375559, 38.24141448100785, 15.05921745300293],
   [531.3011157187455, 63.73087966270137, -0.8875952363014221],
   [539.9551202523238, 35.85211315070923, 13.32433795928955],
   [545.913246906558, 38.25099015932654, 42.09659194946289],
   [543.1164803096507, 37.20636377978649, 21.577903747558594],
   [535.3994372201015, 45.03602186032235, -3.5816152095794678],
   [527.8709878032294, 52.276249750141666, -16.845962524414062],
   [527.3839750959676, 54.1237412099046, -14.067085266113281],
   [530.9649346919409, 52.757260453693405, -12.36950397491455],
   [532.8173172194282, 53.284227531270524, -6.2102789878845215],
   [529.6987036193187, 54.14546836502196, -10.517330169677734],
   [531.407087214225, 54.19742674275736, -5.0118608474731445],
   [534.6924985128509, 56.63917555756382, 4.064609527587891],
   [527.1652780074674, 46.40272382060149, -32.32497024536133],
   [527.5807680660961, 44.39749173999275, -33.842445373535156],
   [542.550217558316, 31.88857620359309, 10.682412147521973],
   [531.3965087441318, 40.23390520730342, -3.497210741043091],
   [532.0476843636784, 45.966924770713064, -17.235862731933594],
   [532.1957337885256, 44.941378470944066, -15.209391593933105],
   [540.8975184007784, 44.917827611177714, 5.523083686828613],
   [527.5825966863911, 41.95375454639784, -29.949941635131836],
   [538.7150404161778, 29.13059159544108, 0.6166184544563293],
   [541.0634509456067, 30.148267946037482, 5.4735822677612305],
   [544.1502996415605, 26.79794554258705, 30.705049514770508],
   [530.5300278317932, 29.979995553734913, -6.215536117553711],
   [532.7784737850985, 33.167909930506084, 4.4875807762146],
   [536.4791588539313, 54.37611047319082, 5.638181209564209],
   [542.6453451388209, 55.78232439564944, 53.13123321533203],
   [530.5495429462312, 47.01072286390984, -15.429283142089844],
   [528.7976558846306, 47.61972224116986, -16.388198852539062],
   [535.0583012221751, 54.359407108238614, 5.6632609367370605],
   [534.0565908896378, 54.39570915361003, 4.055528163909912],
   [542.0746779687113, 29.05634567894955, 8.57150650024414],
   [532.1715193165554, 46.77273678068547, -14.201544761657715],
   [535.355746958861, 28.851181363761064, -3.5216751098632812],
   [535.8221336156992, 27.350975375013086, -4.416381359100342],
   [537.6673196375095, 21.605504480401567, 8.030227661132812],
   [543.1384630783576, 27.938340994428884, 18.32139015197754],
   [536.5785630464161, 24.44277845779407, 1.7431676387786865],
   [543.5756213043524, 31.24246861502516, 15.950555801391602],
   [544.4957122514669, 30.968158366022582, 28.209699630737305],
   [527.6741161827655, 53.39730705079986, -15.893869400024414],
   [530.2708651457983, 53.61316289593863, -11.49129581451416],
   [532.1185286531696, 53.7606027806875, -6.007250785827637],
   [530.0638279695013, 47.34759208114795, -14.27552604675293],
   [534.5938021733834, 54.37245323260093, 4.793562412261963],
   [533.4072733842619, 55.54169369490174, 0.9778055548667908],
   [533.6596328162561, 54.413597189237194, 3.90008807182312],
   [529.3696601104397, 46.462203136646735, -23.396221160888672],
   [530.980792565789, 54.00682257088507, -4.274890422821045],
   [529.2263886934599, 54.110921205256176, -8.438836097717285],
   [527.0696981875348, 54.2142775770882, -11.761241912841797],
   [527.1854124932955, 61.2227745431598, -9.178442001342773],
   [527.3448367228806, 59.44276015540952, -12.769770622253418],
   [527.3523576611905, 58.331558724889405, -12.841782569885254],
   [527.2631485184145, 57.396224359671024, -10.938895225524902],
   [527.0855167362153, 56.717083630291185, -9.797183990478516],
   [531.1509230722622, 55.875741331362164, -2.8425216674804688],
   [531.506265286996, 56.10532166000493, -3.825718879699707],
   [531.9590061106654, 56.59017639869282, -4.783413410186768],
   [532.3046350089938, 57.196049425126, -3.724756956100464],
   [534.2925320641453, 51.4661660438351, -4.383663654327393],
   [544.9660215937765, 46.737737381491904, 63.59035873413086],
   [532.2823769641135, 55.393659016992416, 1.449454665184021],
   [532.879529634624, 55.39447992986676, 0.8228784799575806],
   [528.0359667127426, 48.47422863996411, -16.954927444458008],
   [531.5061178176175, 47.878181989793276, -10.365896224975586],
   [528.4006093296217, 48.06660361486192, -16.7852725982666],
   [533.4148336477393, 41.36551639982518, -1.4653081893920898],
   [536.5263097299235, 42.625902769407894, 0.40760326385498047],
   [532.5363094028131, 45.78010564622548, -11.999129295349121],
   [541.7910648597405, 23.797110819539036, 18.88531494140625],
   [540.7002436973463, 25.67798443097663, 9.5996732711792],
   [539.4903262647748, 27.730645121574007, 1.9582020044326782],
   [532.7386570528698, 58.47159564683132, -0.06022791564464569],
   [531.337078584546, 27.45734012216905, -7.773906707763672],
   [532.0736193117325, 24.06047269609023, -3.078237771987915],
   [532.9383010976519, 20.42594361942002, 1.2410918474197388],
   [538.9057379853232, 37.464381120274034, 9.555315017700195],
   [543.005268735584, 39.66835768245513, 18.354141235351562],
   [531.1604102689538, 36.27441629463052, 5.360065460205078],
   [541.5198391785741, 34.67806027101931, 13.304478645324707],
   [530.0994369087932, 38.93427477824573, -5.64819860458374],
   [530.7519004275798, 45.269470802331035, -23.022424697875977],
   [544.7655418891823, 41.17187927439918, 24.917848587036133],
   [541.7937291398476, 40.6468170096293, 12.582015991210938],
   [539.5171361978088, 41.04637300189775, 6.703146457672119],
   [535.9957149056322, 40.635587216447036, 3.6086008548736572],
   [533.3591590416626, 39.834872731329085, 2.0271527767181396],
   [531.412563243818, 38.88182483591491, 0.2998296618461609],
   [527.7850131554912, 36.07781749251714, -11.777852058410645],
   [544.631659355975, 44.808213622046054, 22.550973892211914],
   [542.9199331218198, 34.44157345981096, 16.444591522216797],
   [526.3735345762157, 47.42374526826969, -29.6685791015625],
   [531.3776818201273, 42.04142263416718, -6.788751602172852],
   [545.9399978518405, 38.463596762489615, 61.05054473876953],
   [530.03115858649, 37.7576927987124, -0.5878174901008606],
   [532.7028023312803, 45.87998911419089, -6.051175594329834],
   [540.5362184231481, 35.967335891874576, 14.573186874389648],
   [530.8906297876979, 43.98464875671023, -20.566730499267578],
   [544.1469176771441, 51.174727226505276, 59.892791748046875],
   [531.2639927604997, 35.618912448821234, 7.058768272399902],
   [529.2497675056178, 42.76684417020537, -26.326637268066406],
   [539.2438754392174, 59.46764315522945, 22.85887908935547],
   [538.3576926178946, 61.88558058103399, 31.711563110351562],
   [545.7398917363388, 45.97799480540182, 43.2846794128418],
   [541.7202795580007, 57.20952812633229, 30.043107986450195],
   [545.2290676400752, 34.38919479434648, 36.86079025268555],
   [531.2263389124909, 65.60648370167611, 1.7983216047286987],
   [526.084651894782, 47.847680406647754, -22.148406982421875],
   [533.1168176961229, 43.47224182244931, -4.817952632904053],
   [544.533012172967, 37.783920227700776, 27.605148315429688],
   [537.2261994008758, 36.51113168337574, 7.366579532623291],
   [535.557101648435, 36.54286955147873, 5.748974800109863],
   [533.8835601520517, 55.81029933677452, 1.997886061668396],
   [544.2894419159388, 48.6297498466616, 23.66580581665039],
   [527.291069387434, 68.07127706471563, 1.364822506904602],
   [533.0306759164223, 65.72934535665422, 15.28676986694336],
   [535.4570387593923, 64.13580599817473, 22.839834213256836],
   [533.9811848807011, 36.37571792645371, 5.306678295135498],
   [532.540939941302, 36.03967453773589, 5.945484161376953],
   [531.6599382108149, 35.80387100131517, 7.051456928253174],
   [544.1020476608745, 34.24190975244517, 22.601152420043945],
   [532.9517699675662, 34.674666017487965, 5.40255069732666],
   [534.592986176155, 34.37774871274224, 4.693426609039307],
   [536.2126718554647, 34.375276142827296, 5.205009937286377],
   [537.8494246575272, 34.73236832752079, 6.783327102661133],
   [538.9062787063781, 35.22673975677592, 8.716156959533691],
   [545.9975109095041, 34.036376763810125, 52.81007385253906],
   [538.384020817625, 36.371180785238025, 9.33840274810791],
   [532.4483095089419, 50.49422486319614, -9.410456657409668],
   [530.5495527775231, 46.75596951233585, -17.455589294433594],
   [528.1728969464415, 49.980815137160576, -16.303319931030273],
   [536.4659062724388, 61.81539498810059, 16.802946090698242],
   [533.9109108061406, 63.67811020338354, 9.729269981384277],
   [527.6961087827644, 66.92532201729966, -5.166405200958252],
   [540.6383753773673, 59.37141447003094, 42.689476013183594],
   [531.8078303349914, 35.22059028368727, 6.413392543792725],
   [528.9417432988387, 39.27057132273018, -14.222667694091797],
   [530.4447315431967, 67.1293753965025, 7.226095199584961],
   [545.0193465210872, 50.12008521833364, 41.38239669799805],
   [529.3282113837543, 56.372806534600166, -6.59886360168457],
   [529.6636157384979, 56.84080552331127, -7.649716377258301],
   [529.9284510799239, 57.594590336504915, -8.943921089172363],
   [530.0844343573411, 58.56989873462247, -8.288385391235352],
   [530.3497907572382, 60.114232477100884, -4.891276836395264],
   [533.0386982506195, 54.192334133548854, -0.014589421451091766],
   [533.7106473899684, 53.991323539191626, 0.3120989203453064],
   [534.3004855792991, 53.69749571792808, 0.25311970710754395],
   [535.8445686238339, 52.721690839569156, 1.2125319242477417],
   [542.2168974374569, 49.25517731270041, 11.473971366882324],
   [528.8984462892745, 37.40792984213654, -8.274959564208984],
   [530.0030902480918, 33.914903778814065, 2.9581949710845947],
   [531.0383941050798, 34.454877655585875, 5.452916622161865],
   [532.4622896060355, 53.982013305754464, 0.2855774164199829],
   [541.8352270229926, 54.08226298934346, 19.830310821533203],
   [528.5247785464236, 33.46739566026286, -5.034388065338135],
   [530.8475883917233, 61.79002042368525, -2.8058559894561768],
   [527.676849281916, 38.11313332636529, -18.208751678466797],
   [530.2519005837072, 42.327773757934466, -14.900350570678711],
   [527.4673641139339, 63.02402943707797, -7.997170925140381],
   [535.6344739157533, 57.58837696001886, 6.807666301727295],
   [534.1697883846701, 47.4516317277676, -4.117912769317627],
   [533.4336802343275, 59.952237364681764, 2.446568012237549],
   [538.4090021303641, 47.325643721962656, -0.8963569402694702],
   [535.8584504080084, 49.3304456835504, -1.8336243629455566],
   [539.8321996095943, 50.398409092257786, 4.524258613586426],
   [527.7669235783799, 65.16204048837731, -7.570011138916016],
   [531.4599697333998, 43.46521736438083, -10.798274993896484],
   [536.5587923183884, 59.37514544531015, 11.347061157226562],
   [533.9334048020268, 61.61854303022058, 5.88818883895874],
   [537.5823477815461, 54.97229967709433, 7.6501874923706055],
   [543.5491652978271, 51.96008523366245, 25.145626068115234],
   [539.4601835237839, 55.78992398429456, 12.676740646362305],
   [543.77380048664, 53.94530326176885, 38.19138717651367],
   [537.3795085668938, 51.50021180771357, 1.983381748199463],
   [530.0935479649401, 40.667337373664914, -10.204596519470215],
   [530.0486877799625, 46.149860534896874, -24.446495056152344],
   [531.4039313695225, 46.60553599920091, -18.141830444335938],
   [529.265291115541, 44.775804768270326, -28.56938362121582],
   [531.7000793756764, 32.15589148840291, 1.9504035711288452],
   [534.849248631037, 31.221805697256883, 1.6975287199020386],
   [537.4983590547733, 31.25789882767525, 2.538086175918579],
   [539.6418264730819, 31.859573892463587, 5.1895318031311035],
   [540.9901095079708, 32.959294831857775, 8.84899616241455],
   [541.6061579215291, 36.563579167883574, 17.067996978759766],
   [546.0285974545181, 42.093125398312964, 43.074485778808594],
   [540.1392701810584, 38.83971249702569, 11.733964920043945],
   [538.2088763522786, 39.17442128786694, 7.884613513946533],
   [535.7500702460112, 39.030788570909564, 5.1401286125183105],
   [533.40875790934, 38.5199202338323, 3.6102993488311768],
   [531.6260202537311, 37.80868770984078, 3.3228533267974854],
   [530.4312036855309, 37.094881845192255, 2.7820541858673096],
   [545.4231373423451, 42.574499859665316, 64.39147186279297],
   [531.3901478982671, 47.059761347948466, -15.316427230834961],
   [528.9371520855175, 40.94734239850538, -19.50297737121582],
   [528.6120705872775, 46.2183059891625, -29.245662689208984],
   [527.3941406518007, 47.14473320391196, -27.213787078857422],
   [528.5535055813797, 46.54440502611506, -26.4291934967041],
   [530.8673787823348, 47.6106479587385, -13.529046058654785],
   [527.0194799484672, 47.317085582356476, -28.79757308959961],
   [526.7813955523237, 47.729513193555874, -22.08680534362793],
   [530.5918273327288, 35.6322215602421, 5.90795373916626],
   [529.5653126507068, 35.94612242175943, 2.155444860458374],
   [529.0424845470232, 36.13840282890208, -2.249373197555542],
   [539.5245981483672, 35.586673184830914, 10.668397903442383],
   [540.5763694193016, 34.797068059569355, 11.25536060333252]],
  'annotations': {'silhouette': [[264.05902099609375,
     45.313201904296875,
     -1.0126651525497437],
    [282.0540771484375, 47.08538055419922, 1.2410918474197388],
    [296.7335510253906, 50.74688720703125, 8.030227661132812],
    [309.5341796875, 57.54991149902344, 18.88531494140625],
    [316.8575439453125, 66.86488342285156, 30.705049514770508],
    [320.78302001953125, 77.98472595214844, 41.5375862121582],
    [322.5915222167969, 89.33389282226562, 52.81007385253906],
    [322.4129943847656, 103.07654571533203, 61.05054473876953],
    [320.80859375, 115.83731079101562, 64.39147186279297],
    [319.3896484375, 128.76052856445312, 63.59035873413086],
    [316.8470458984375, 142.53350830078125, 59.892791748046875],
    [312.18597412109375, 156.83607482910156, 53.13123321533203],
    [305.9560852050781, 167.97706604003906, 42.689476013183594],
    [298.8765563964844, 175.78135681152344, 31.711563110351562],
    [289.87255859375, 182.76634216308594, 22.839834213256836],
    [282.3408203125, 187.712890625, 15.28676986694336],
    [274.313720703125, 192.0587615966797, 7.226095199584961],
    [264.52435302734375, 194.9825439453125, 1.364822506904602],
    [251.83499145507812, 195.56764221191406, -1.1094566583633423],
    [239.07147216796875, 193.8220977783203, 0.025303233414888382],
    [229.27044677734375, 189.98573303222656, 4.841640472412109],
    [221.1129608154297, 184.86692810058594, 12.036025047302246],
    [213.45584106445312, 179.1750030517578, 18.72884178161621],
    [204.48684692382812, 171.24314880371094, 26.667118072509766],
    [197.66702270507812, 162.53997802734375, 36.73867416381836],
    [192.31143188476562, 150.65664672851562, 46.41720962524414],
    [189.43150329589844, 135.69802856445312, 52.74214553833008],
    [188.9879608154297, 121.45063781738281, 56.174678802490234],
    [189.56393432617188, 108.25788116455078, 56.70667266845703],
    [190.2902069091797, 95.24720764160156, 53.42344284057617],
    [192.9342041015625, 81.4566650390625, 45.252403259277344],
    [197.3616943359375, 70.3128662109375, 34.36530303955078],
    [204.12051391601562, 59.70463943481445, 24.31058120727539],
    [214.27809143066406, 51.397090911865234, 13.644415855407715],
    [229.487060546875, 46.30580520629883, 4.335203170776367],
    [245.52493286132812, 44.68799591064453, -0.5644832253456116]],
   'lipsUpperOuter': [[221.24668884277344,
     149.5133056640625,
     2.8073291778564453],
    [224.13525390625, 147.66455078125, -2.3529465198516846],
    [229.45083618164062, 146.82943725585938, -8.376557350158691],
    [236.1417236328125, 145.723388671875, -13.968961715698242],
    [246.6361083984375, 145.10400390625, -17.61862564086914],
    [256.5294189453125, 146.76153564453125, -17.962202072143555],
    [266.3244934082031, 145.95277404785156, -16.845962524414062],
    [275.9284973144531, 147.44589233398438, -12.36950397491455],
    [281.67852783203125, 149.0816650390625, -6.2102789878845215],
    [286.282470703125, 150.364501953125, 0.25311970710754395],
    [288.63482666015625, 152.41915893554688, 5.6632609367370605]],
   'lipsLowerOuter': [[224.71524047851562,
     154.3392333984375,
     -0.4031379222869873],
    [229.50643920898438, 159.06130981445312, -5.562975883483887],
    [236.3255615234375, 163.917236328125, -9.650686264038086],
    [244.7841033935547, 167.37489318847656, -13.51905632019043],
    [254.8092041015625, 168.64151000976562, -14.078422546386719],
    [264.6912536621094, 168.1985321044922, -12.769770622253418],
    [273.1953125, 165.4890594482422, -8.288385391235352],
    [280.08709716796875, 161.22445678710938, -3.724756956100464],
    [284.98828125, 156.92291259765625, 1.997886061668396],
    [288.63482666015625, 152.41915893554688, 5.6632609367370605]],
   'lipsUpperInner': [[225.4246826171875,
     150.07891845703125,
     1.3957136869430542],
    [229.42550659179688, 149.09381103515625, -1.8566033840179443],
    [234.40377807617188, 149.57644653320312, -5.975272178649902],
    [240.2696990966797, 150.39031982421875, -9.705985069274902],
    [247.320556640625, 151.3248291015625, -12.461589813232422],
    [255.71478271484375, 152.1177520751953, -13.147005081176758],
    [263.8371887207031, 151.96865844726562, -11.761241912841797],
    [270.5318298339844, 151.6478271484375, -8.438836097717285],
    [275.97772216796875, 151.32469177246094, -4.274890422821045],
    [280.57647705078125, 151.2476806640625, 0.2855774164199829],
    [284.2931823730469, 152.58737182617188, 3.90008807182312]],
   'lipsLowerInner': [[225.4246826171875,
     150.07891845703125,
     1.3957136869430542],
    [229.8866729736328, 153.5005645751953, -0.6792677640914917],
    [233.73292541503906, 155.3621826171875, -4.505373954772949],
    [239.79486083984375, 157.37942504882812, -7.876378536224365],
    [247.07891845703125, 159.0809326171875, -10.553521156311035],
    [255.58132934570312, 160.02297973632812, -11.324355125427246],
    [263.88629150390625, 159.73768615722656, -9.797183990478516],
    [270.847900390625, 158.66900634765625, -6.59886360168457],
    [276.5058288574219, 157.1260528564453, -2.8425216674804688],
    [280.01800537109375, 155.62960815429688, 1.449454665184021],
    [284.2931823730469, 152.58737182617188, 3.90008807182312]],
   'rightEyeUpper0': [[215.56857299804688,
     88.91148376464844,
     6.181829929351807],
    [217.76971435546875, 88.04081726074219, 4.3361616134643555],
    [221.3714599609375, 86.89991760253906, 2.743800163269043],
    [226.6908721923828, 86.38861846923828, 1.6096364259719849],
    [231.75047302246094, 86.9820556640625, 1.7139623165130615],
    [236.80838012695312, 88.51705932617188, 2.82338285446167],
    [240.25143432617188, 90.73609924316406, 4.193847179412842]],
   'rightEyeLower0': [[213.92698669433594,
     89.55049896240234,
     8.599652290344238],
    [216.16880798339844, 90.88925170898438, 6.6556243896484375],
    [218.8204345703125, 91.78846740722656, 5.089890956878662],
    [222.44146728515625, 92.59902954101562, 3.434352397918701],
    [227.7587127685547, 93.25753784179688, 2.29081654548645],
    [232.8085479736328, 93.32014465332031, 2.3564467430114746],
    [237.5135040283203, 92.84410095214844, 3.4358792304992676],
    [240.414306640625, 92.52115631103516, 4.837896823883057],
    [241.75674438476562, 92.13246154785156, 5.017544269561768]],
   'rightEyeUpper1': [[212.5765380859375,
     86.02388000488281,
     6.389158248901367],
    [215.77349853515625, 83.55014038085938, 3.318373680114746],
    [220.12918090820312, 81.32034301757812, 1.221291422843933],
    [226.45187377929688, 80.55789184570312, -0.28084683418273926],
    [232.92013549804688, 81.42559814453125, 0.3370141088962555],
    [238.2986297607422, 83.95621490478516, 2.147148847579956],
    [243.22610473632812, 88.59854125976562, 3.5149614810943604]],
   'rightEyeLower1': [[211.93380737304688, 89.70149993896484, 9.6005220413208],
    [213.51791381835938, 92.85894775390625, 7.349088191986084],
    [216.4337158203125, 94.93670654296875, 5.0828471183776855],
    [221.593505859375, 96.15127563476562, 2.8066177368164062],
    [227.47970581054688, 96.6107177734375, 1.452303171157837],
    [233.51934814453125, 96.55194854736328, 1.2898379564285278],
    [238.63287353515625, 95.51292419433594, 2.3948090076446533],
    [241.8656005859375, 94.17219543457031, 3.372938871383667],
    [244.02670288085938, 92.40538787841797, 4.141025543212891]],
   'rightEyeUpper2': [[209.48025512695312,
     85.31966400146484,
     8.041899681091309],
    [212.45318603515625, 80.19782257080078, 3.8951785564422607],
    [217.67218017578125, 77.30919647216797, 0.7501389384269714],
    [224.87896728515625, 76.26493072509766, -1.1414790153503418],
    [233.2563018798828, 77.15232849121094, -1.082930564880371],
    [242.65298461914062, 81.269775390625, 0.04873010143637657],
    [247.12039184570312, 87.35498046875, 1.559889554977417]],
   'rightEyeLower2': [[207.97564697265625,
     91.12916564941406,
     11.844511032104492],
    [208.57073974609375, 96.5372543334961, 9.931183815002441],
    [211.69595336914062, 98.75470733642578, 6.8902177810668945],
    [217.8955078125, 100.51236724853516, 3.7367122173309326],
    [225.91543579101562, 100.9759521484375, 1.7237446308135986],
    [233.70272827148438, 100.22399139404297, 0.886727511882782],
    [239.80245971679688, 98.72724914550781, 1.3185296058654785],
    [244.01849365234375, 96.94454956054688, 1.0940423011779785],
    [247.46420288085938, 93.75728607177734, 0.8469892144203186]],
   'rightEyeLower3': [[197.32916259765625,
     93.85637664794922,
     21.145282745361328],
    [201.79293823242188, 100.32606506347656, 12.65913200378418],
    [205.45404052734375, 103.8170166015625, 7.297268390655518],
    [212.8772430419922, 105.90926361083984, 2.2070679664611816],
    [224.54444885253906, 105.93524169921875, 0.18376822769641876],
    [233.47219848632812, 104.4090576171875, -0.5989161133766174],
    [240.24520874023438, 102.16451263427734, -1.6761845350265503],
    [245.3875732421875, 99.22117614746094, -2.1316051483154297],
    [249.46270751953125, 94.60301208496094, -3.3070316314697266]],
   'rightEyebrowUpper': [[200.79144287109375,
     82.95404052734375,
     16.28510856628418],
    [204.5245361328125, 73.84276580810547, 10.005946159362793],
    [211.1166229248047, 67.65913391113281, 3.45438551902771],
    [220.60089111328125, 64.56428527832031, -2.0928380489349365],
    [232.81703186035156, 64.88385009765625, -7.100390911102295],
    [247.12338256835938, 66.91216278076172, -9.15500545501709],
    [248.23593139648438, 75.02400207519531, -7.454439163208008],
    [252.73333740234375, 86.57843017578125, -5.850582599639893]],
   'rightEyebrowLower': [[202.47677612304688,
     92.56216430664062,
     15.784820556640625],
    [204.88502502441406, 84.04180908203125, 10.654502868652344],
    [207.7950439453125, 76.24214172363281, 5.243154048919678],
    [213.98294067382812, 71.43920135498047, 0.7105515003204346],
    [222.33309936523438, 69.1295166015625, -3.169182538986206],
    [233.41909790039062, 69.6473388671875, -6.073670864105225]],
   'leftEyeUpper0': [[302.498779296875, 94.14620971679688, 10.668397903442383],
    [300.5794372558594, 93.0289306640625, 8.716156959533691],
    [297.298828125, 91.49433898925781, 6.783327102661133],
    [292.2181396484375, 90.38587951660156, 5.205009937286377],
    [287.1904296875, 90.3935546875, 4.693426609039307],
    [282.09588623046875, 91.31522369384766, 5.40255069732666],
    [278.5449523925781, 93.00984191894531, 6.413392543792725]],
   'leftEyeLower0': [[303.8351745605469, 94.97016906738281, 13.32433795928955],
    [301.5671691894531, 96.01390075683594, 11.153042793273926],
    [298.9582824707031, 96.5814208984375, 9.33840274810791],
    [295.3642578125, 97.0158462524414, 7.366579532623291],
    [290.18316650390625, 97.11436462402344, 5.748974800109863],
    [285.29132080078125, 96.59550476074219, 5.306678295135498],
    [280.82061767578125, 95.55238342285156, 5.945484161376953],
    [278.08587646484375, 94.82041931152344, 7.051456928253174],
    [276.8568115234375, 94.24628448486328, 7.058768272399902]],
   'leftEyeUpper1': [[305.76361083984375,
     91.69517517089844,
     11.25536060333252],
    [303.3663024902344, 88.88941955566406, 7.9378275871276855],
    [299.6070861816406, 86.17864227294922, 5.538181304931641],
    [293.63238525390625, 84.72608947753906, 3.3924307823181152],
    [287.2119140625, 84.83195495605469, 3.2460577487945557],
    [281.5579528808594, 86.6380615234375, 4.4875807762146],
    [276.1565246582031, 90.63297271728516, 5.452916622161865]],
   'leftEyeLower1': [[305.63897705078125,
     95.32783508300781,
     14.573186874389648],
    [303.57452392578125, 98.25994873046875, 12.093485832214355],
    [300.5777587890625, 99.974853515625, 9.555315017700195],
    [295.5762634277344, 100.555419921875, 6.797666072845459],
    [289.8982849121094, 100.39532470703125, 4.913525581359863],
    [284.12353515625, 99.67676544189453, 4.174936771392822],
    [279.41925048828125, 98.03780364990234, 4.6582441329956055],
    [276.5352783203125, 96.28105163574219, 5.360065460205078],
    [274.77032470703125, 94.28759765625, 5.90795373916626]],
   'leftEyeUpper2': [[308.6922607421875,
     91.32575988769531,
     13.304478645324707],
    [307.04791259765625, 85.99049377441406, 8.84899616241455],
    [302.8626708984375, 82.57682037353516, 5.1895318031311035],
    [296.2090759277344, 80.70914459228516, 2.538086175918579],
    [287.98590087890625, 80.59710693359375, 1.6975287199020386],
    [278.2104797363281, 83.49662780761719, 1.9504035711288452],
    [272.94281005859375, 88.95682525634766, 2.9581949710845947]],
   'leftEyeLower2': [[308.960205078125, 97.17864990234375, 17.067996978759766],
    [307.54278564453125, 102.3868637084961, 15.05921745300293],
    [304.40679931640625, 104.24405670166016, 11.733964920043945],
    [298.41461181640625, 105.28303527832031, 7.884613513946533],
    [290.78216552734375, 104.8371810913086, 5.1401286125183105],
    [283.5144348144531, 103.25138092041016, 3.6102993488311768],
    [277.9805908203125, 101.04362487792969, 3.3228533267974854],
    [274.271728515625, 98.827880859375, 2.7820541858673096],
    [271.5838928222656, 95.2619857788086, 2.155444860458374]],
   'leftEyeLower3': [[318.0455322265625,
     100.96674346923828,
     27.605148315429688],
    [313.30322265625, 106.81627655029297, 18.354141235351562],
    [309.5424499511719, 109.8535385131836, 12.582015991210938],
    [302.4756164550781, 111.09381103515625, 6.703146457672119],
    [291.544677734375, 109.81867980957031, 3.6086008548736572],
    [283.3604736328125, 107.33316040039062, 2.0271527767181396],
    [277.3179931640625, 104.3747787475586, 0.2998296618461609],
    [273.0299377441406, 100.88533020019531, -0.5878174901008606],
    [269.9609680175781, 95.85884857177734, -2.249373197555542]],
   'leftEyebrowUpper': [[316.707763671875,
     89.97189331054688,
     22.601152420043945],
    [315.07366943359375, 80.66124725341797, 15.950555801391602],
    [310.41455078125, 73.875244140625, 8.57150650024414],
    [302.39239501953125, 69.76010131835938, 1.9582020044326782],
    [291.005859375, 68.58155822753906, -4.416381359100342],
    [277.08367919921875, 68.91172790527344, -7.773906707763672],
    [274.5784912109375, 76.74237060546875, -6.215536117553711],
    [268.35394287109375, 87.56770324707031, -5.034388065338135]],
   'leftEyebrowLower': [[313.6484375, 99.17393493652344, 21.577903747558594],
    [313.038330078125, 90.5916748046875, 16.444591522216797],
    [311.89068603515625, 82.6668472290039, 10.682412147521973],
    [307.27557373046875, 77.26470947265625, 5.4735822677612305],
    [299.9858093261719, 74.105712890625, 0.6166184544563293],
    [289.5581359863281, 73.23838806152344, -3.5216751098632812]],
   'midwayBetweenEyes': [[260.9006042480469,
     85.81149291992188,
     -9.384198188781738]],
   'noseTip': [[258.7784729003906, 127.59423065185547, -33.01103973388672]],
   'noseBottom': [[257.787841796875, 133.91461181640625, -18.80295753479004]],
   'noseRightCorner': [[236.87890625,
     130.29916381835938,
     -11.767321586608887]],
   'noseLeftCorner': [[277.6083984375,
     132.3006134033203,
     -10.365896224975586]],
   'rightCheek': [[214.0137939453125, 126.09651184082031, -4.603578567504883]],
   'leftCheek': [[299.03582763671875,
     130.58546447753906,
     -0.8963569402694702]]}}]
  
  predictedPoses =  [{'score': 0.32371445304906,
  'keypoints': [{'position': {'y': 46.36201244080919, 'x': 525.4400239156463},
    'part': 'nose',
    'score': 2},
   {'position': {'y': 30.254423778240394, 'x': 509.3324352530775},
    'part': 'leftEye',
    'score': 2},
   {'position': {'y': 30.254423778240394, 'x': 541.5476125782151},
    'part': 'rightEye',
    'score': 2},
   {'position': {'y': 30.254423778240394, 'x': 505.9156740216235},
    'part': 'leftEar',
    'score': 2},
   {'position': {'y': 30.254423778240394, 'x': 544.964373809669},
    'part': 'rightEar',
    'score': 2},
   {'position': {'y': 115.51592579077801, 'x': 479.3374150156672},
    'part': 'leftShoulder',
    'score': 2},
   {'position': {'y': 103.9902735657832, 'x': 588.8311111531176},
    'part': 'rightShoulder',
    'score': 2},
   {'position': {'y': 191.1530185173064, 'x': 456.2861105656776},
    'part': 'leftElbow',
    'score': 2},
   {'position': {'y': 173.14418691575202, 'x': 612.6027688671694},
    'part': 'rightElbow',
    'score': 2},
   {'position': {'y': 232.93350783291254, 'x': 420.98880062663096},
    'part': 'leftWrist',
    'score': 2},
   {'position': {'y': 204.8397305344877, 'x': 574.4240458718741},
    'part': 'rightWrist',
    'score': 2},
   {'position': {'y': 259.586578603213, 'x': 501.6683662015946},
    'part': 'leftHip',
    'score': 2},
   {'position': {'y': 253.8237524907156, 'x': 577.3054589281228},
    'part': 'rightHip',
    'score': 2},
   {'position': {'y': 259.586578603213, 'x': 501.6683662015946},
    'part': 'leftKnee',
    'score': 2},
   {'position': {'y': 363.31744862816623, 'x': 610.4417090749829},
    'part': 'rightKnee',
    'score': 2},
   {'position': {'y': 473.53149802967897, 'x': 466.3710562625481},
    'part': 'leftAnkle',
    'score': 2},
   {'position': {'y': 473.53149802967897, 'x': 655.8239647109},
    'part': 'rightAnkle',
    'score': 2}]}]
  

  // Draw poses.
  drawDetectionResults();

  toggleLoadingUI(false);
  document.getElementById('results').style.display = 'block';
}

let guiState = {
  // Selected image
  sourceImage: Object.keys(sourceImages)[0],
  avatarSVG: Object.keys(avatarSvgs)[0],
  // Detection debug
  showKeypoints: true,
  showSkeleton: true,
  // Illustration debug
  showCurves: false,
  showLabels: false,
};

function setupGui() {
  const gui = new dat.GUI();
  
  const imageControls = gui.addFolder('Image');
  imageControls.open();
  gui.add(guiState, 'sourceImage', Object.keys(sourceImages)).onChange(() => testImageAndEstimatePoses());
  gui.add(guiState, 'avatarSVG', Object.keys(avatarSvgs)).onChange(() => loadSVG(avatarSvgs[guiState.avatarSVG]));
  
  const debugControls = gui.addFolder('Debug controls');
  debugControls.open();
  gui.add(guiState, 'showKeypoints').onChange(drawDetectionResults);
  gui.add(guiState, 'showSkeleton').onChange(drawDetectionResults);
  gui.add(guiState, 'showCurves').onChange(drawDetectionResults);
  gui.add(guiState, 'showLabels').onChange(drawDetectionResults);
}

/**
 * Kicks off the demo by loading the posenet model and estimating
 * poses on a default image
 */
export async function bindPage() {
  toggleLoadingUI(true);
  canvasScope = paper.default;
  let canvas = getIllustrationCanvas();
  canvas.width = CANVAS_WIDTH;
  canvas.height = CANVAS_HEIGHT;
  canvasScope.setup(canvas);

  await tf.setBackend('webgl');
  setStatusText('Loading PoseNet model...');
  posenet = await posenet_module.load({
    architecture: resnetArchitectureName,
    outputStride: defaultStride,
    inputResolution: defaultInputResolution,
    multiplier: defaultMultiplier,
    quantBytes: defaultQuantBytes
  });

  setupGui(posenet);
  setStatusText('Loading SVG file...');
  await loadSVG(Object.values(avatarSvgs)[0]);
}

window.onload = bindPage;
FileUtils.setDragDropHandler(loadSVG);

// Target is SVG string or path
async function loadSVG(target) {
  let svgScope = await SVGUtils.importSVG(target);
  skeleton = new Skeleton(svgScope);
  illustration = new PoseIllustration(canvasScope);
  illustration.bindSkeleton(skeleton, svgScope);
  testImageAndEstimatePoses();
}
